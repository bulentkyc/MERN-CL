(this.webpackJsonpfe=this.webpackJsonpfe||[]).push([[0],{26:function(e,t,n){},27:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(17),o=n.n(c),s=(n(26),n(27),n(2)),i=n(0),l=function(e){var t=Object(s.f)();return Object(i.jsx)("div",{className:"wrapper",children:Object(i.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log(e);var n={};n.email=e.target[0].value,n.pass=e.target[1].value;var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)};"register"==e.nativeEvent.submitter.id?fetch("https://contactlist-io.herokuapp.com/auth/register",a).then((function(e){return e.json().then((function(e){"success"==e.status?alert("Congrats, you registered as well! Please login."):alert(e.message),console.log(e)}))})):"login"==e.nativeEvent.submitter.id&&fetch("https://contactlist-io.herokuapp.com/auth/login",a).then((function(e){return e.json().then((function(e){alert(e.message),console.log(e),localStorage.setItem("token",e.token),t.push("/contacts")}))}))},children:[Object(i.jsx)("input",{name:"email",type:"email"}),Object(i.jsx)("input",{name:"pass",type:"password"}),Object(i.jsxs)("section",{children:[Object(i.jsx)("input",{id:"register",type:"submit",value:"Register"}),Object(i.jsx)("input",{id:"login",type:"submit",value:"Login"})]})]})})},r=n(20),u=n(21),d=n(10),h=(n(37),function(e){var t=e.contact,n=e.deleteContact,c=t.fullName,o=t.email,s=t.phone,l=t.address,r=t.avatar,u={_id:t._id},h=Object(a.useState)(!1),j=Object(d.a)(h,2),p=j[0],f=j[1],b=Object(a.useState)("white"),m=Object(d.a)(b,2),g=m[0],O=m[1],v=function(e){var t,n=e.target.getAttribute("data-id");t="file"==n?e.target.files[0]:e.target.innerText,u[n]=t},x=function(e){console.log(e),13==e.charCode&&e.preventDefault()};return Object(i.jsxs)("div",{className:"card",style:{backgroundColor:g},children:[p?Object(i.jsx)("input",{"data-id":"file",type:"file",onChange:v}):Object(i.jsx)("img",{src:"https://contactlist-io.herokuapp.com/avatars/"+r}),Object(i.jsx)("div",{"data-id":"fullName",onKeyPress:x,onBlur:v,contentEditable:p,children:c}),Object(i.jsx)("div",{"data-id":"email",onKeyPress:x,onBlur:v,contentEditable:p,children:o}),Object(i.jsx)("div",{"data-id":"phone",onKeyPress:x,onBlur:v,contentEditable:p,children:s}),Object(i.jsx)("div",{"data-id":"address",onKeyPress:x,onBlur:v,contentEditable:p,children:l}),Object(i.jsx)("button",{onClick:function(){f(!p),O(p?"white":"lavender")},children:"\u270f\ufe0f"}),Object(i.jsx)("button",{onClick:function(){console.log(u);var e=new FormData;Object.keys(u).forEach((function(t){e.append(t,u[t])}));var t={method:"POST",headers:{"x-auth-token":localStorage.getItem("token")},body:e};fetch("https://contactlist-io.herokuapp.com/contacts/update",t).then((function(e){return e.json().then((function(e){"success"===e.status?(f(!1),O("green")):O("coral")}))})).catch((function(e){return O("coral")}))},children:"\ud83d\udcbe"}),Object(i.jsx)("button",{onClick:n,children:"\ud83d\uddd1\ufe0f"})]})});var j=function(){var e=this,t=Object(s.f)();Object(a.useEffect)((function(){localStorage.getItem("token")||t.push("/auth")}));var n={"Content-Type":"application/json","x-auth-token":localStorage.getItem("token")},c=Object(a.useState)({fullName:"",email:"",phone:"",address:""}),o=Object(d.a)(c,2),l=o[0],j=o[1],p=Object(a.useState)([{_id:"1",fullName:"test",email:"t@t.com",phone:"123456",address:"test"}]),f=Object(d.a)(p,2),b=f[0],m=f[1],g=function(e,t){var n=Object(u.a)({},l);n[t]=e.target.value,j(n)};Object(a.useEffect)((function(){fetch("https://contactlist-io.herokuapp.com/contacts/all",{headers:n}).then((function(e){return e.json().then((function(e){"success"==e.status?m(e.data):console.log(e.message)}))}))}),[]);var O=function(e){fetch("https://contactlist-io.herokuapp.com/contacts/"+e,{method:"DELETE",headers:n}).then((function(e){return e.json().then((function(e){if("success"===e.status){alert(e.message);var t=b.filter((function(t){if(t._id!=e.data)return t}));m(t)}else alert("There's an error. For details please check the console."),console.log(e.message)}))})).catch((function(e){alert(e)}))},v=[];return"object"==typeof b&&b.length>0&&(v=b.map((function(t){return Object(i.jsx)(h,{contact:t,deleteContact:O.bind(e,t._id)},t._id)}))),Object(i.jsxs)("div",{className:"App",children:[Object(i.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault();var t=new FormData;t.append("fullName",l.fullName),t.append("email",l.email),t.append("phone",l.phone),t.append("address",l.address),t.append("file",e.target[4].files[0]);var n={method:"POST",headers:{"x-auth-token":localStorage.getItem("token")},body:t};fetch("https://contactlist-io.herokuapp.com/contacts/new",n).then((function(e){return e.json().then((function(e){return m([].concat(Object(r.a)(b),[e]))}))}))},children:[Object(i.jsx)("input",{required:!0,placeholder:"Full name",value:l.fullName,onChange:function(e){return g(e,"fullName")}}),Object(i.jsx)("input",{type:"email",placeholder:"Email",value:l.email,onChange:function(e){return g(e,"email")}}),Object(i.jsx)("input",{type:"tel",placeholder:"Phone number",value:l.phone,onChange:function(e){return g(e,"phone")}}),Object(i.jsx)("input",{placeholder:"Address",value:l.address,onChange:function(e){return g(e,"address")}}),Object(i.jsx)("input",{type:"file"}),Object(i.jsx)("button",{children:"Create Contact"})]}),Object(i.jsx)("section",{className:"contact-list",children:v})]})},p=n(19),f=(n(38),function(){return Object(i.jsx)("div",{id:"get-contact",children:Object(i.jsxs)("form",{className:"contact-form",onSubmit:function(e){e.preventDefault(),console.log(e);var t=new FormData;t.append("fullName",e.target[0].value),t.append("email",e.target[1].value),t.append("phone",e.target[2].value),t.append("message",e.target[3].value),Array.from(e.target[4].files).forEach((function(e){t.append("attachs",e)})),console.log(1,t);var n,a=Object(p.a)(t.values());try{for(a.s();!(n=a.n()).done;){var c=n.value;console.log(c)}}catch(o){a.e(o)}finally{a.f()}console.log(3,Object.fromEntries(t));fetch("https://contactlist-io.herokuapp.com/get-contact",{method:"POST",body:t}).then((function(e){console.log(e),e.json().then((function(e){e.status,alert(e.message),console.log(e)}))}))},children:[Object(i.jsx)("input",{type:"text",placeholder:"Full Name"}),Object(i.jsx)("input",{type:"email",placeholder:"Email"}),Object(i.jsx)("input",{type:"tel",placeholder:"Phone"}),Object(i.jsx)("textarea",{type:"text",placeholder:"Message"}),Object(i.jsx)("input",{type:"file",multiple:!0}),Object(i.jsx)("button",{children:"Get Contact"})]})})}),b=n(7),m=(n(39),function(e){return Object(i.jsxs)("nav",{children:[Object(i.jsx)(b.b,{exact:!0,className:"nav-item",activeClassName:"active",to:"/",children:"Home"}),Object(i.jsx)(b.b,{exact:!0,className:"nav-item",activeClassName:"active",to:"/contacts",children:"Contacts"}),Object(i.jsx)(b.b,{exact:!0,className:"nav-item",activeClassName:"active",to:"/get-contact",children:"Get Contact"})]})});var g=function(){return Object(i.jsxs)("div",{children:[Object(i.jsx)(m,{}),Object(i.jsxs)(s.c,{children:[Object(i.jsx)(s.a,{path:"/auth",children:Object(i.jsx)(l,{})}),Object(i.jsx)(s.a,{path:"/contacts",children:Object(i.jsx)(j,{})}),Object(i.jsx)(s.a,{path:"/get-contact",children:Object(i.jsx)(f,{})}),Object(i.jsx)(s.a,{path:"/",children:Object(i.jsx)(l,{})})]})]})},O=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,41)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),o(e),s(e)}))};o.a.render(Object(i.jsx)(b.a,{basename:"/MERN-CL",children:Object(i.jsx)(g,{})}),document.getElementById("root")),O()}},[[40,1,2]]]);
//# sourceMappingURL=main.56e03b85.chunk.js.map